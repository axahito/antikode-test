select brands.name, outlets.name, outlets.address, ST_X(outlets.position) as lng, ST_Y(outlets.position) as lat, ST_Distance_Sphere(ST_GeomFromText('POINT(106.823536 -6.178581)'), outlets.position) as distanceToMonas, (select count(*) from products where brands.id=products.brand_id) as totalProduct from brands right join outlets on brands.id=outlets.brand_id order by distanceToMonas